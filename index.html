
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Voice Modulator App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

    html, body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
      color: #222;
      margin: 0;
      padding: 0;
      touch-action: manipulation;
    }

    .container {
      max-width: 960px;
      margin: auto;
      padding: 24px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      color: #444;
      font-size: 2rem;
      margin-bottom: 16px;
    }

    label, select, input, button {
      width: 100%;
      margin: 12px 0;
      font-size: 1rem;
    }

    select, input[type=text] {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #fafafa;
    }

    button {
      background: #4a90e2;
      color: white;
      border: none;
      padding: 12px;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 16px;
    }

    button:hover {
      background: #357ab8;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-top: 24px;
    }

    .knob-wrapper {
      flex: 1 1 20%;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 12px;
    }

    .data-screen {
      width: 70px;
      height: 32px;
      background: #111;
      color: red;
      font-family: 'Orbitron', monospace;
      font-size: 1rem;
      text-align: center;
      padding-top: 4px;
      border-radius: 4px;
      margin-bottom: 6px;
    }

    .knob-label {
      margin-top: 8px;
      font-size: 0.9rem;
    }

    input[type=range] {
      appearance: none;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: conic-gradient(#4a90e2 0% 50%, #ccc 50% 100%);
      border: none;
      transform: rotate(-90deg);
    }

    #mod1, #mod2 {
      width: 120px;
      height: 120px;
    }

    .circle-modulator {
      margin: 24px auto 12px;
      width: 220px;
      height: 220px;
      border-radius: 50%;
      border: 4px dashed #ddd;
      position: relative;
      background: radial-gradient(#fff, #f0f0f0);
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      position: absolute;
    }

    .dot:nth-child(1) { background: #FFB3BA; top: 10%; left: 50%; transform: translate(-50%, -50%); }
    .dot:nth-child(2) { background: #BAE1FF; top: 50%; left: 90%; transform: translate(-50%, -50%); }
    .dot:nth-child(3) { background: #BFFCC6; top: 90%; left: 50%; transform: translate(-50%, -50%); }
    .dot:nth-child(4) { background: #FFFFBA; top: 50%; left: 10%; transform: translate(-50%, -50%); }

    .button-row {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 16px;
    }

    .keyboard {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 32px;
      justify-content: center;
    }

    .key {
      background: #eee;
      padding: 12px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      border: 1px solid #ccc;
    }

    .key:hover {
      background: #d4eaff;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Voice Modulator</h1>

  <div class="circle-modulator">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>

  <div class="button-row">
    <button id="speakBtn">üîä Speak</button>
    <button id="loopBtn">üîÅ Loop: OFF</button>
  </div>

  <label for="voiceSelect">Select Voice:</label>
  <select id="voiceSelect"></select>

  <label for="nameInput">Say This:</label>
  <input type="text" id="nameInput" placeholder="Type something to say...">

  <div class="controls">
    <div class="knob-wrapper">
      <div class="data-screen" id="rateDisplay">1.00</div>
      <input type="range" id="rateSlider" min="0.5" max="2" step="0.01" value="1">
      <label class="knob-label">Rate</label>
    </div>
    <div class="knob-wrapper">
      <div class="data-screen" id="pitchDisplay">1.00</div>
      <input type="range" id="pitchSlider" min="0" max="2" step="0.01" value="1">
      <label class="knob-label">Pitch</label>
    </div>
    <div class="knob-wrapper">
      <div class="data-screen" id="volumeDisplay">1.00</div>
      <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
      <label class="knob-label">Volume</label>
    </div>
    <div class="knob-wrapper">
      <div class="data-screen" id="filterDisplay">5</div>
      <input type="range" id="mod3" min="0" max="10" step="1" value="5">
      <label class="knob-label">Filter Mod</label>
    </div>
  </div>

  <div class="controls">
    <div class="knob-wrapper">
      <div class="data-screen" id="fmDisplay">5</div>
      <input type="range" id="mod1" min="0" max="10" step="1" value="5">
      <label class="knob-label">FM Mod</label>
    </div>
    <div class="knob-wrapper">
      <div class="data-screen" id="amDisplay">5</div>
      <input type="range" id="mod2" min="0" max="10" step="1" value="5">
      <label class="knob-label">AM Mod</label>
    </div>
  </div>

  <div class="keyboard">
    <div class="key" onclick="playKey('C')">C</div>
    <div class="key" onclick="playKey('D')">D</div>
    <div class="key" onclick="playKey('E')">E</div>
    <div class="key" onclick="playKey('F')">F</div>
    <div class="key" onclick="playKey('G')">G</div>
    <div class="key" onclick="playKey('A')">A</div>
    <div class="key" onclick="playKey('B')">B</div>
  </div>
</div>

<script>
  const sliders = ["rate", "pitch", "volume", "mod1", "mod2", "mod3"];
  sliders.forEach(id => {
    const slider = document.getElementById(id + "Slider") || document.getElementById(id);
    const display = document.getElementById(id + "Display");
    if (slider && display) {
      slider.addEventListener("input", () => {
        display.textContent = slider.value;
      });
    }
  });

  const voiceSelect = document.getElementById("voiceSelect");
  const nameInput = document.getElementById("nameInput");
  const rateSlider = document.getElementById("rateSlider");
  const pitchSlider = document.getElementById("pitchSlider");
  const volumeSlider = document.getElementById("volumeSlider");
  const mod1 = document.getElementById("mod1");
  const mod2 = document.getElementById("mod2");
  const mod3 = document.getElementById("mod3");
  const loopBtn = document.getElementById("loopBtn");
  const speakBtn = document.getElementById("speakBtn");

  let voices = [];
  let loopMode = false;

  function populateVoices() {
    voices = speechSynthesis.getVoices();
    voiceSelect.innerHTML = '';
    voices.forEach((voice, i) => {
      const option = document.createElement("option");
      option.value = i;
      option.textContent = `${voice.name} (${voice.lang}) ${voice.default ? '‚òÖ' : ''}`;
      voiceSelect.appendChild(option);
    });
  }
  speechSynthesis.onvoiceschanged = populateVoices;

  function speakText(text) {
    const spoken = new SpeechSynthesisUtterance(text || nameInput.value || "Hello!");
    spoken.voice = voices[voiceSelect.value];
    spoken.rate = parseFloat(rateSlider.value) + parseFloat(mod2.value) * 0.01;
    spoken.pitch = parseFloat(pitchSlider.value) + parseFloat(mod1.value) * 0.01;
    spoken.volume = parseFloat(volumeSlider.value) - parseFloat(mod3.value) * 0.05;
    spoken.onend = () => { if (loopMode) speakText(text); };
    speechSynthesis.speak(spoken);
  }

  function toggleLoop() {
    loopMode = !loopMode;
    loopBtn.textContent = loopMode ? "üîÅ Loop: ON" : "üîÅ Loop: OFF";
    if (!loopMode) speechSynthesis.cancel();
  }

  function playKey(note) {
    speakText(`Note ${note}`);
  }

  speakBtn.addEventListener("click", () => speakText());
  loopBtn.addEventListener("click", toggleLoop);
</script>
</body>
</html>
